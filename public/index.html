<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>GeekzPay API Docs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
  <style>
  :root { color-scheme: dark; }
  html, body { max-width:100%; overflow-x:hidden; }
  html { background:#0f172a; }
  body { font-family: system-ui, sans-serif; color:#e2e8f0; }
  
  .flex > * { min-width: 0; }
  .grid > * { min-width: 0; }
  
  p code, li code, td code, th code, h1 code, h2 code, h3 code, a code {
    overflow-wrap: anywhere;
    word-break: break-word;
  }
  
  pre { margin:0; }
  pre code {
    font-size:.92rem;
    white-space: pre-wrap;
    word-break: break-word;
  }
  
  img { max-width:100%; height:auto; }
  table { width:100%; border-collapse:separate; border-spacing:0; table-layout: fixed; }
  .input, .select, .textarea { font-size:16px; min-width:0; width:100%; }
  
  @media (max-width:480px){
    pre code { font-size:.86rem; }
    .btn { padding:.75rem 1rem; font-size:.95rem; }
  }
  
  .gradient-bg {
    background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
  }
  
  .card {
    background: rgba(15, 23, 42, 0.7);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  .feature-icon {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    margin-bottom: 16px;
  }
  
  .drop-zone {
    border: 2px dashed #4b5563;
    border-radius: 8px;
    padding: 40px 20px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s;
  }
  
  .drop-zone:hover, .drop-zone.dragover {
    border-color: #6366f1;
    background-color: rgba(99, 102, 241, 0.1);
  }
  
  .preview-container {
    max-width: 200px;
    margin: 0 auto;
  }
  
  .step-number {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background-color: #6366f1;
    color: white;
    font-weight: bold;
    margin-right: 12px;
  }
  
  .download-link {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 12px 16px;
    background-color: rgba(99, 102, 241, 0.1);
    border: 1px solid rgba(99, 102, 241, 0.3);
    border-radius: 8px;
    text-decoration: none;
    color: #e2e8f0;
    transition: all 0.3s;
  }
  
  .download-link:hover {
    background-color: rgba(99, 102, 241, 0.2);
    border-color: rgba(99, 102, 241, 0.5);
  }
  
  /* Navigation untuk halaman terpisah */
  .page-section {
    display: none;
  }
  
  .page-section.active {
    display: block;
  }
  
  .nav-link {
    cursor: pointer;
  }
  
  .nav-link.active {
    color: #818cf8;
    font-weight: 600;
  }
  </style>
</head>
<body class="gradient-bg">
  <header class="sticky top-0 z-40 border-b border-slate-800 bg-slate-900/90 backdrop-blur">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <button id="openMenu" class="md:hidden p-2 rounded-lg border border-slate-700">‚ò∞</button>
      <div class="flex items-center gap-2">
        <span class="text-lg font-bold">üöÄ GeekzPay API</span>
        <span class="text-xs px-2 py-0.5 rounded bg-green-500/15 text-green-300 border border-green-500/30">v1.0</span>
      </div>
      <span class="text-sm text-slate-400 hidden sm:block">Simple & Powerful</span>
    </div>
  </header>

  <div class="max-w-6xl mx-auto px-4 w-full max-w-full">
    <div class="flex w-full">
      <aside class="hidden md:block w-64 shrink-0 pr-6 py-8">
  <nav class="space-y-3 text-sm">
    <div class="nav-link active" data-page="docs">üè† Dokumentasi API</div>
    <div class="nav-link" data-page="forwarder">üì± Geekz Forwarder</div>
    <div class="nav-link" data-page="donate">‚ù§Ô∏è Donasi</div>
    <hr class="border-slate-700 my-4">
    <div class="text-xs text-slate-500 uppercase tracking-wider">API Sections</div>
          <a href="#hero" class="block font-medium hover:text-indigo-300">üè† Overview</a>
          <a href="#quickstart" class="block font-medium hover:text-indigo-300">‚ö° Quick Start</a>
          <a href="#qris" class="block font-medium hover:text-indigo-300">üí≥ QRIS Dinamis</a>
          <a href="#qr-converter" class="block font-medium hover:text-indigo-300">üîÑ QR Converter</a>
          <a href="#webhook" class="block font-medium hover:text-indigo-300">üîî Webhook</a>
          <a href="#history" class="block font-medium hover:text-indigo-300">üìä Riwayat</a>
          <a href="#examples" class="block font-medium hover:text-indigo-300">üìö Contoh</a>
        </nav>
      </aside>

      <div id="drawer" class="fixed inset-0 z-50 hidden">
  <div class="absolute inset-0 bg-black/50"></div>
  <div class="absolute left-0 top-0 h-full w-72 bg-slate-900 border-r border-slate-800 shadow-xl p-6">
    <div class="flex items-center justify-between mb-6">
      <div class="text-base font-semibold">Menu</div>
      <button id="closeMenu" class="p-2 rounded-lg border border-slate-700">‚úï</button>
    </div>
    <nav class="space-y-3">
      <div class="nav-link active" data-page="docs" data-close>üè† Dokumentasi API</div>
      <div class="nav-link" data-page="forwarder" data-close>üì± Geekz Forwarder</div>
      <div class="nav-link" data-page="donate" data-close>‚ù§Ô∏è Donasi</div>
      <hr class="border-slate-700 my-4">
      <div class="text-xs text-slate-500 uppercase tracking-wider">API Sections</div>
            <a href="#hero" class="block py-1" data-close>üè† Overview</a>
            <a href="#quickstart" class="block py-1" data-close>‚ö° Quick Start</a>
            <a href="#qris" class="block py-1" data-close>üí≥ QRIS Dinamis</a>
            <a href="#qr-converter" class="block py-1" data-close>üîÑ QR Converter</a>
            <a href="#webhook" class="block py-1" data-close>üîî Webhook</a>
            <a href="#history" class="block py-1" data-close>üìä Riwayat</a>
            <a href="#examples" class="block py-1" data-close>üìö Contoh</a>
          </nav>
        </div>
      </div>

      <main class="flex-1 py-8 md:py-10">
        <!-- Halaman Dokumentasi API -->
        <div id="docs-page" class="page-section active">
          <section id="hero" class="mb-12 text-center">
            <h1 class="text-3xl md:text-4xl font-bold mb-4">GeekzPay REST API</h1>
            <p class="text-lg text-slate-300 mb-6">Integrasikan pembayaran QRIS dengan mudah dalam aplikasi Anda</p>
            <div class="flex flex-wrap justify-center gap-4">
              <div class="feature-icon bg-indigo-500/20 text-indigo-300">üí≥</div>
              <div class="feature-icon bg-green-500/20 text-green-300">üîî</div>
              <div class="feature-icon bg-blue-500/20 text-blue-300">üìä</div>
              <div class="feature-icon bg-purple-500/20 text-purple-300">üîÑ</div>
            </div>
          </section>

          <section id="quickstart" class="mb-12">
            <h2 class="text-2xl font-bold mb-4">‚ö° Quick Start</h2>
            <div class="card rounded-2xl p-6 mb-6">
              <h3 class="font-semibold mb-3">Base URL</h3>
              <div class="flex flex-col md:flex-row gap-4">
                <input id="baseUrl" placeholder="https://your-api.example.com"
                       class="flex-1 px-4 py-2 rounded-lg border border-slate-700 bg-slate-800 text-slate-100" />
                <button id="saveBase" class="px-4 py-2 rounded-lg bg-indigo-600 text-white">Simpan</button>
              </div>
              <p class="text-sm text-slate-400 mt-2">Simpan Base URL untuk digunakan di Live Test</p>
            </div>
          </section>

          <section id="qris" class="mb-12">
            <h2 class="text-2xl font-bold mb-4">üí≥ QRIS Dinamis</h2>
            <p class="mb-4">Buat kode QRIS dinamis dengan jumlah yang dapat disesuaikan</p>
            
            <div class="card rounded-2xl p-6 mb-6">
              <h3 class="font-semibold mb-4">Parameter</h3>
              <div class="overflow-x-auto">
                <table class="min-w-full text-sm">
                  <thead class="text-slate-300">
                    <tr><th class="py-2 px-3">Field</th><th class="py-2 px-3">Tipe</th><th class="py-2 px-3">Keterangan</th></tr>
                  </thead>
                  <tbody class="divide-y divide-slate-800">
                    <tr><td class="py-2 px-3"><code>base_amount</code></td><td class="py-2 px-3">int</td><td class="py-2 px-3">Jumlah dasar (wajib dengan unique_code)</td></tr>
                    <tr><td class="py-2 px-3"><code>unique_code</code></td><td class="py-2 px-3">int (1-999)</td><td class="py-2 px-3">Kode unik untuk total</td></tr>
                    <tr><td class="py-2 px-3"><code>amount</code></td><td class="py-2 px-3">int</td><td class="py-2 px-3">Jumlah langsung (alternatif)</td></tr>
                    <tr><td class="py-2 px-3"><code>payload_static</code></td><td class="py-2 px-3">string</td><td class="py-2 px-3">Payload QRIS static custom (opsional)</td></tr>
                    <tr><td class="py-2 px-3"><code>qr</code></td><td class="py-2 px-3">string</td><td class="py-2 px-3">"png" untuk mendapatkan gambar QR</td></tr>
                  </tbody>
                </table>
              </div>
            </div>

            <div class="card rounded-2xl p-6">
              <h3 class="font-semibold mb-4">üß™ Live Test - QRIS Dinamis</h3>
              <div class="grid gap-4 md:grid-cols-2">
                <div>
                  <label class="block text-sm mb-1">Jumlah Dasar (Rp)</label>
                  <input id="tiBase" type="number" class="input px-3 py-2 rounded-lg border border-slate-700 bg-slate-800" placeholder="10000">
                </div>
                <div>
                  <label class="block text-sm mb-1">Kode Unik (1-999)</label>
                  <input id="tiUnique" type="number" class="input px-3 py-2 rounded-lg border border-slate-700 bg-slate-800" placeholder="338">
                </div>
                <div class="md:col-span-2 flex items-center gap-2">
                  <input id="tiAutoUnique" type="checkbox">
                  <label for="tiAutoUnique" class="text-sm">Acak kode unik otomatis</label>
                </div>
                <div class="md:col-span-2">
                  <label class="block text-sm mb-1">Atau Jumlah Langsung</label>
                  <input id="tiAmount" type="number" class="input px-3 py-2 rounded-lg border border-slate-700 bg-slate-800" placeholder="10338">
                </div>
                <div class="md:col-span-2">
                  <label class="block text-sm mb-1">Payload Static (Opsional)</label>
                  <textarea id="tiPayload" rows="3" class="textarea px-3 py-2 rounded-lg border border-slate-700 bg-slate-800" placeholder="00020101021126...6304XXXX"></textarea>
                  <p class="text-xs text-slate-400 mt-1">Gunakan payload QRIS static custom jika ingin override default</p>
                </div>
              </div>
              <div class="flex gap-2 mt-4">
                <button id="btnDynamic" class="btn px-4 py-2 rounded-lg bg-indigo-600 text-white">Buat QRIS</button>
                <button id="btnDynamicReset" class="btn px-4 py-2 rounded-lg bg-slate-800 border border-slate-700">Reset</button>
              </div>

              <div id="outDynamic" class="mt-4 hidden">
                <h4 class="font-medium mb-2">Hasil</h4>
                <div class="text-xs text-slate-400 mb-2" id="metaDynamic"></div>
                <div class="grid gap-4 md:grid-cols-2">
                  <div class="rounded-xl bg-slate-800 p-4">
                    <div class="text-sm font-medium mb-1">Response JSON</div>
                    <pre class="overflow-x-auto"><code id="jsonDynamic" class="language-json"></code></pre>
                  </div>
                  <div class="rounded-xl bg-slate-800 p-4">
                    <div class="text-sm font-medium mb-2">Kode QR</div>
                    <img id="imgQR" class="w-full max-w-xs rounded-lg border border-slate-700 mx-auto">
                  </div>
                </div>
              </div>
            </div>
          </section>

          <section id="qr-converter" class="mb-12">
            <h2 class="text-2xl font-bold mb-4">üîÑ QR Converter</h2>
            <p class="mb-4">Konversi gambar QRIS static menjadi payload code</p>
            
            <div class="card rounded-2xl p-6">
              <h3 class="font-semibold mb-4">üì∑ Upload Gambar QR</h3>
              
              <div id="dropZone" class="drop-zone mb-4">
                <div class="text-4xl mb-2">üìÅ</div>
                <p class="text-lg font-medium">Drop gambar QR di sini atau klik untuk upload</p>
                <p class="text-sm text-slate-400 mt-1">Format: PNG, JPG, JPEG (max 2MB)</p>
                <input type="file" id="fileInput" class="hidden" accept="image/png,image/jpeg,image/jpg">
              </div>

              <div id="previewSection" class="hidden mb-4">
                <h4 class="font-medium mb-2">Preview Gambar</h4>
                <div class="preview-container">
                  <img id="imagePreview" class="w-full rounded-lg border border-slate-700">
                </div>
              </div>

              <div class="flex gap-2">
                <button id="btnConvert" class="px-4 py-2 rounded-lg bg-purple-600 text-white disabled:opacity-50" disabled>Convert ke Payload</button>
                <button id="btnResetConverter" class="px-4 py-2 rounded-lg bg-slate-800 border border-slate-700">Reset</button>
              </div>

              <div id="outConverter" class="mt-4 hidden">
                <h4 class="font-medium mb-2">Hasil Konversi</h4>
                <div class="text-xs text-slate-400 mb-2" id="metaConverter"></div>
                <div class="rounded-xl bg-slate-800 p-4">
                  <div class="text-sm font-medium mb-1">Payload Code</div>
                  <pre class="overflow-x-auto"><code id="jsonConverter" class="language-json"></code></pre>
                </div>
                <button id="btnCopyPayload" class="mt-2 px-4 py-2 rounded-lg bg-green-600 text-white">Salin Payload</button>
              </div>
            </div>
          </section>

          <section id="webhook" class="mb-12">
            <h2 class="text-2xl font-bold mb-4">üîî Webhook Payment</h2>
            <p class="mb-4">Terima notifikasi pembayaran dari berbagai dompet digital</p>
            
            <div class="card rounded-2xl p-6">
              <h3 class="font-semibold mb-4">üß™ Live Test - Webhook</h3>
              <div class="grid gap-4 md:grid-cols-2">
                <div>
                  <label class="block text-sm mb-1">Token</label>
                  <input id="tiToken" class="input px-3 py-2 rounded-lg border border-slate-700 bg-slate-800" placeholder="USER123">
                </div>
                <div>
                  <label class="block text-sm mb-1">Format Data</label>
                  <select id="tiMode" class="select px-3 py-2 rounded-lg border border-slate-700 bg-slate-800">
                    <option value="json">JSON</option>
                    <option value="form">Form Data</option>
                    <option value="text">Plain Text</option>
                  </select>
                </div>
                <div class="md:col-span-2">
                  <label class="block text-sm mb-1">Pesan Notifikasi</label>
                  <textarea id="tiBody" rows="3" class="textarea px-3 py-2 rounded-lg border border-slate-700 bg-slate-800">{ "message": "Pembayaran masuk Rp 10.338 dari ShopeePay" }</textarea>
                </div>
              </div>
              <div class="flex gap-2 mt-4">
                <button id="btnWebhook" class="btn px-4 py-2 rounded-lg bg-indigo-600 text-white">Test Webhook</button>
                <button id="btnWebhookReset" class="btn px-4 py-2 rounded-lg bg-slate-800 border border-slate-700">Reset</button>
              </div>

              <div id="outWebhook" class="mt-4 hidden">
                <h4 class="font-medium mb-2">Hasil</h4>
                <div class="text-xs text-slate-400 mb-2" id="metaWebhook"></div>
                <div class="rounded-xl bg-slate-800 p-4">
                  <pre class="overflow-x-auto"><code id="jsonWebhook" class="language-json"></code></pre>
                </div>
              </div>
            </div>
          </section>

          <section id="history" class="mb-12">
            <h2 class="text-2xl font-bold mb-4">üìä Riwayat Pembayaran</h2>
            <div class="card rounded-2xl p-6">
              <h3 class="font-semibold mb-4">Endpoint</h3>
              <div class="bg-slate-800 rounded-lg p-4">
                <code>GET /webhook/status?token=USER123&limit=5</code>
              </div>
              <p class="text-sm text-slate-400 mt-2">Mendapatkan ringkasan pembayaran terbaru</p>
            </div>
          </section>

          <section id="examples" class="mb-16">
            <h2 class="text-2xl font-bold mb-4">üìö Contoh Penggunaan</h2>
            
            <div class="space-y-6">
              <div class="card rounded-2xl p-6">
                <h3 class="font-semibold mb-2">Membuat QRIS Dinamis dengan Payload Custom</h3>
                <pre class="bg-slate-800 rounded-lg p-4"><code class="language-bash">curl -X POST https://restapi.amgeekz.my.id/qris/dynamic \
  -d base_amount=20000 \
  -d unique_code=777 \
  -d payload_static='00020101021126...6304ABCD' \
  -d qr=png</code></pre>
                <pre class="bg-slate-800 rounded-lg p-4 mt-2"><code class="language-json">{
  "base_amount": 20000,
  "unique_code": 777,
  "total": 20777,
  "payload": "00020101021126...",
  "qr_png_data_url": "data:image/png;base64,..."
}</code></pre>
              </div>
              
              <div class="card rounded-2xl p-6">
                <h3 class="font-semibold mb-2">Mengirim Webhook</h3>
                <pre class="bg-slate-800 rounded-lg p-4"><code class="language-bash">curl -X POST 'https://restapi.amgeekz.my.id/webhook/payment?token=USER123' \
  -H 'Content-Type: application/json' \
  -d '{ "message": "Pembayaran Rp 15.250 diterima" }'</code></pre>
               <div class="mt-4 p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg">
    <div class="flex items-start gap-3">
      <div class="text-blue-400 text-lg">üì±</div>
      <div class="flex-1">
        <h4 class="font-medium text-blue-300 mb-1">Baca Notifikasi QRIS Otomatis</h4>
        <p class="text-sm text-blue-200 mb-2">Geekz Forwarder membaca notifikasi dari aplikasi QRIS (ShopeePay, Gopay, dll) dan meneruskan ke webhook secara otomatis</p>
        <button onclick="showPage('forwarder')" class="px-3 py-1.5 text-xs bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors">
          üì• Buka Panduan Instalasi
        </button>
      </div>
    </div>
  </div>
</div>
              
              <div class="card rounded-2xl p-6">
                <h3 class="font-semibold mb-2">Melihat Riwayat</h3>
                <pre class="bg-slate-800 rounded-lg p-4"><code class="language-bash">curl -X GET 'https://restapi.amgeekz.my.id/webhook/summary?token=USER123&limit=3'</code></pre>
                <pre class="bg-slate-800 rounded-lg p-4 mt-2"><code class="language-json">{
  "ok": true,
  "token": "USER123",
  "event_id": "a6ac10590d18d2190e7082552c03a0395bc9142c",
  "received_at": "2025-09-24T11:49:30.018Z",
  "amount": 10338,
  "method": "POST",
  "ip": "0.0.0.0",
  "body": {
    "message": "Pembayaran masuk Rp 10.338 dari ShopeePay"
  }
}</code></pre>
              </div>
            </div>
          </section>
        </div>

        <!-- Halaman Geekz Forwarder -->
<div id="forwarder-page" class="page-section">
  <section class="mb-8">
    <div class="flex items-center gap-3 mb-6">
      <h1 class="text-3xl font-bold">üì± Geekz Forwarder</h1>
      <span class="px-3 py-1 text-xs bg-green-500/20 text-green-300 border border-green-500/30 rounded-full">v2.0</span>
    </div>
    
    <p class="text-lg text-slate-300 mb-8">Aplikasi Android untuk membaca notifikasi pembayaran dan meneruskannya ke webhook secara otomatis</p>

    <!-- Download Card -->
<div class="card rounded-2xl p-8 mb-10 text-center">
  <div class="text-7xl mb-4">üì≤</div>
  <h2 class="text-2xl font-bold mb-2">Geekz Forwarder App</h2>
  <p class="text-slate-400 mb-6">Versi terbaru 1.1 ‚Ä¢ Ukuran 1.4 MB</p>
  
  <div class="flex justify-center">
    <a href="https://sfile.co/W8OBwD7EWZJ" target="_blank" class="download-link px-8 py-5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl text-lg font-semibold">
      <span class="text-2xl mr-2">‚¨áÔ∏è</span>
      Download Geekz Forwarder.apk
    </a>
  </div>
</div>

    <!-- Fitur-Fitur -->
    <h2 class="text-2xl font-bold mb-6">‚ú® Fitur Unggulan</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-10">
      <div class="card rounded-xl p-6">
        <div class="feature-icon bg-blue-500/20 text-blue-300">üîî</div>
        <h3 class="text-lg font-semibold mb-2">Baca Notifikasi</h3>
        <p class="text-slate-400 text-sm">Membaca notifikasi dari berbagai aplikasi pembayaran seperti ShopeePay, GoPay, DANA, OVO, dan lainnya</p>
      </div>

      <div class="card rounded-xl p-6">
        <div class="feature-icon bg-green-500/20 text-green-300">üîÑ</div>
        <h3 class="text-lg font-semibold mb-2">Forward ke Webhook</h3>
        <p class="text-slate-400 text-sm">Meneruskan data pembayaran ke endpoint webhook yang sudah ditentukan</p>
      </div>

      <div class="card rounded-xl p-6">
        <div class="feature-icon bg-purple-500/20 text-purple-300">üìä</div>
        <h3 class="text-lg font-semibold mb-2">Riwayat Notifikasi</h3>
        <p class="text-slate-400 text-sm">Menyimpan riwayat notifikasi yang sudah diterima dan diforward</p>
      </div>

      <div class="card rounded-xl p-6">
        <div class="feature-icon bg-yellow-500/20 text-yellow-300">‚ö°</div>
        <h3 class="text-lg font-semibold mb-2">Multi Format</h3>
        <p class="text-slate-400 text-sm">Support JSON, Form Data, dan Plain Text untuk webhook</p>
      </div>
    </div>

    <!-- PANDUAN SETTING LENGKAP -->
    <h2 class="text-2xl font-bold mb-6">‚öôÔ∏è PANDUAN SETTING LENGKAP</h2>
    
    <div class="card rounded-2xl p-6 mb-8">
      <h3 class="text-xl font-semibold mb-4 text-indigo-300">üìã LANGKAH-LANGKAH SETTING:</h3>
      
      <!-- Step 1: Notification Access -->
      <div class="mb-8 p-4 bg-blue-500/10 rounded-xl border border-blue-500/30">
        <div class="flex items-start gap-4">
          <div class="step-number bg-blue-600">1</div>
          <div class="flex-1">
            <h4 class="font-semibold text-lg mb-2">üîî IZINKAN NOTIFICATION ACCESS</h4>
            <ul class="space-y-2 text-sm">
              <li class="flex items-start gap-2">
                <span class="text-blue-400">‚û°Ô∏è</span>
                <span>Tap <span class="font-mono bg-slate-800 px-2 py-1 rounded">"Open Notification Access"</span> di aplikasi</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-blue-400">‚û°Ô∏è</span>
                <span>Akan terbuka pengaturan sistem Android</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-blue-400">‚û°Ô∏è</span>
                <span>Cari dan tap <span class="font-mono bg-slate-800 px-2 py-1 rounded">"Geekz Forwarder"</span> dalam daftar aplikasi</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-blue-400">‚û°Ô∏è</span>
                <span><span class="font-bold text-green-400">AKTIFKAN</span> toggle izin notifikasinya</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-blue-400">‚û°Ô∏è</span>
                <span>Kembali ke aplikasi Geekz Forwarder</span>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Step 2: Setting Dasar -->
      <div class="mb-8 p-4 bg-green-500/10 rounded-xl border border-green-500/30">
        <div class="flex items-start gap-4">
          <div class="step-number bg-green-600">2</div>
          <div class="flex-1">
            <h4 class="font-semibold text-lg mb-2">‚öôÔ∏è SETTING DASAR</h4>
            <div class="grid gap-3">
              <div class="flex items-center gap-3 p-3 bg-slate-800 rounded-lg">
                <span class="text-xl">‚úÖ</span>
                <div>
                  <span class="font-semibold">Enabled</span>
                  <span class="text-xs text-slate-400 ml-2">(WAJIB DICENTANG)</span>
                  <p class="text-xs text-slate-400">Aktifkan forward notifikasi</p>
                </div>
              </div>
              <div class="flex items-center gap-3 p-3 bg-slate-800 rounded-lg">
                <span class="text-xl">‚¨ú</span>
                <div>
                  <span class="font-semibold">Wi-Fi Only</span>
                  <span class="text-xs text-slate-400 ml-2">(KOSONGKAN)</span>
                  <p class="text-xs text-slate-400">Biarkan tidak dicentang agar tetap forward walau pakai data seluler</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Step 3: App Filtering -->
      <div class="mb-8 p-4 bg-purple-500/10 rounded-xl border border-purple-500/30">
        <div class="flex items-start gap-4">
          <div class="step-number bg-purple-600">3</div>
          <div class="flex-1">
            <h4 class="font-semibold text-lg mb-2">üîç APP FILTERING</h4>
            <div class="space-y-4">
              <div class="flex items-center gap-3 p-3 bg-slate-800 rounded-lg">
                <span class="text-xl">‚úÖ</span>
                <div>
                  <span class="font-semibold">Enable App Filter</span>
                  <span class="text-xs text-slate-400 ml-2">(WAJIB DICENTANG)</span>
                  <p class="text-xs text-slate-400">Aktifkan filter aplikasi</p>
                </div>
              </div>
              <div>
                <div class="flex items-center gap-2 mb-3">
                  <span class="font-semibold">Select Apps:</span>
                  <span class="text-xs bg-yellow-600/30 text-yellow-300 px-2 py-1 rounded">Tap untuk memilih aplikasi</span>
                </div>
                <div class="p-5 bg-slate-800/50 rounded-lg text-center border border-dashed border-slate-600">
                  <span class="text-4xl block mb-3">üì±</span>
                  <p class="text-sm text-slate-300 font-medium">Silakan pilih aplikasi yang diinginkan</p>
                  <p class="text-xs text-slate-400 mt-2">User bebas memilih aplikasi yang notifikasinya ingin diforward</p>
                  <p class="text-xs text-indigo-300 mt-3">Contoh: ShopeePay, GoPay, DANA, OVO, Mobile Banking, dll</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Step 4: ENDPOINT -->
      <div class="mb-4 p-4 bg-yellow-500/10 rounded-xl border border-yellow-500/30">
        <div class="flex items-start gap-4">
          <div class="step-number bg-yellow-600">4</div>
          <div class="flex-1">
            <h4 class="font-semibold text-lg mb-2">üåê ENDPOINT</h4>
            <div class="space-y-4">
              <div>
                <label class="block text-sm font-medium mb-1">URL:</label>
                <div class="flex gap-2">
                  <input type="text" id="webhookUrlInput" value="https://restapi.amgeekz.my.id/webhook/payment?token=USER123" 
                         class="flex-1 px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm font-mono"
                         readonly>
                  <button onclick="copyWebhookUrl()" class="px-3 py-2 bg-indigo-600 rounded-lg text-sm whitespace-nowrap">üìã Salin</button>
                </div>
                <p class="text-xs text-slate-400 mt-1">Ganti USER123 dengan token Anda</p>
              </div>
              
              <div>
                <label class="block text-sm font-medium mb-1">Protocol:</label>
                <div class="flex gap-3">
                  <label class="flex items-center gap-2">
                    <input type="radio" name="protocol" checked class="accent-indigo-500">
                    <span class="text-sm">JSON</span>
                  </label>
                  <label class="flex items-center gap-2">
                    <input type="radio" name="protocol" class="accent-indigo-500">
                    <span class="text-sm">Form Data</span>
                  </label>
                  <label class="flex items-center gap-2">
                    <input type="radio" name="protocol" class="accent-indigo-500">
                    <span class="text-sm">Plain Text</span>
                  </label>
                </div>
                <p class="text-xs text-slate-400 mt-1">Pilih JSON (paling umum digunakan)</p>
              </div>
              
              <div class="flex items-center gap-3 p-3 bg-slate-800 rounded-lg">
                <span class="text-xl">‚¨ú</span>
                <div>
                  <span class="font-semibold">Enable Authentication</span>
                  <span class="text-xs text-slate-400 ml-2">(KOSONGKAN)</span>
                  <p class="text-xs text-slate-400">Biarkan tidak dicentang jika tidak pakai authentication</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- TABEL RINGKASAN SETTING -->
    <div class="card rounded-2xl p-6 mb-10">
      <h3 class="text-lg font-semibold mb-4">üìä RINGKASAN SETTING</h3>
      <div class="overflow-x-auto">
        <table class="w-full text-sm">
          <thead class="bg-slate-800">
            <tr>
              <th class="p-3 text-left">Menu</th>
              <th class="p-3 text-left">Setting</th>
              <th class="p-3 text-left">Keterangan</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-slate-800">
            <tr>
              <td class="p-3">Enabled</td>
              <td class="p-3"><span class="px-2 py-1 bg-green-600/30 text-green-300 rounded">‚úÖ CENTANG</span></td>
              <td class="p-3 text-slate-400">Forward notifikasi aktif</td>
            </tr>
            <tr>
              <td class="p-3">Wi-Fi Only</td>
              <td class="p-3"><span class="px-2 py-1 bg-slate-700 text-slate-300 rounded">‚¨ú KOSONG</span></td>
              <td class="p-3 text-slate-400">Bisa pakai WiFi/Data</td>
            </tr>
            <tr>
              <td class="p-3">Open Notification Access</td>
              <td class="p-3"><span class="px-2 py-1 bg-green-600/30 text-green-300 rounded">‚úÖ SUDAH</span></td>
              <td class="p-3 text-slate-400">Izin notifikasi diberikan</td>
            </tr>
            <tr>
              <td class="p-3">Enable App Filter</td>
              <td class="p-3"><span class="px-2 py-1 bg-green-600/30 text-green-300 rounded">‚úÖ CENTANG</span></td>
              <td class="p-3 text-slate-400">Filter aplikasi aktif</td>
            </tr>
            <tr>
              <td class="p-3">Select Apps</td>
              <td class="p-3"><span class="px-2 py-1 bg-blue-600/30 text-blue-300 rounded">üì± BEBAS</span></td>
              <td class="p-3 text-slate-400">User pilih sendiri aplikasinya</td>
            </tr>
            <tr>
              <td class="p-3">URL</td>
              <td class="p-3"><span class="px-2 py-1 bg-blue-600/30 text-blue-300 rounded">Isi endpoint</span></td>
              <td class="p-3 text-slate-400">URL webhook Anda</td>
            </tr>
            <tr>
              <td class="p-3">Protocol</td>
              <td class="p-3"><span class="px-2 py-1 bg-blue-600/30 text-blue-300 rounded">JSON</span></td>
              <td class="p-3 text-slate-400">Format data</td>
            </tr>
            <tr>
              <td class="p-3">Enable Authentication</td>
              <td class="p-3"><span class="px-2 py-1 bg-slate-700 text-slate-300 rounded">‚¨ú KOSONG</span></td>
              <td class="p-3 text-slate-400">Tidak pakai auth</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Cara Install -->
    <h2 class="text-2xl font-bold mb-6">üì¶ Cara Install</h2>
    <div class="space-y-4 mb-10">
      <div class="flex items-start gap-4 card rounded-xl p-4">
        <div class="step-number">1</div>
        <div>
          <h3 class="font-semibold">Download APK</h3>
          <p class="text-sm text-slate-400">Klik tombol Download di atas</p>
        </div>
      </div>

      <div class="flex items-start gap-4 card rounded-xl p-4">
        <div class="step-number">2</div>
        <div>
          <h3 class="font-semibold">Izinkan Install dari Sumber Tidak Dikenal</h3>
          <p class="text-sm text-slate-400">Buka Settings ‚Üí Security ‚Üí Aktifkan "Install from Unknown Sources"</p>
        </div>
      </div>

      <div class="flex items-start gap-4 card rounded-xl p-4">
        <div class="step-number">3</div>
        <div>
          <h3 class="font-semibold">Install APK</h3>
          <p class="text-sm text-slate-400">Buka file APK yang sudah di download dan install</p>
        </div>
      </div>

      <div class="flex items-start gap-4 card rounded-xl p-4">
        <div class="step-number">4</div>
        <div>
          <h3 class="font-semibold">Konfigurasi Aplikasi</h3>
          <p class="text-sm text-slate-400">Ikuti panduan setting lengkap di atas</p>
        </div>
      </div>
    </div>

    <!-- Format Notifikasi -->
    <h2 class="text-2xl font-bold mb-6">üìù Format Notifikasi</h2>
    <div class="space-y-4">
      <div class="card rounded-xl p-6">
        <h3 class="font-semibold mb-2">Contoh Notifikasi dari ShopeePay</h3>
        <pre class="bg-slate-800 rounded-lg p-3 text-xs overflow-x-auto"><code>Pembayaran diterima
Rp 10.338
dari ShopeePay
17 Nov 2024 14:23</code></pre>
      </div>

      <div class="card rounded-xl p-6">
        <h3 class="font-semibold mb-2">Data yang Dikirim ke Webhook</h3>
        <pre class="bg-slate-800 rounded-lg p-3 text-xs overflow-x-auto"><code class="language-json">{
  "app": "ShopeePay",
  "amount": 10338,
  "message": "Pembayaran diterima Rp 10.338 dari ShopeePay",
  "timestamp": "2024-11-17T14:23:00+07:00",
  "token": "USER123"
}</code></pre>
      </div>
    </div>

    <!-- Troubleshooting -->
    <div class="mt-10 p-6 bg-yellow-500/10 border border-yellow-500/30 rounded-2xl">
      <h3 class="text-lg font-semibold text-yellow-300 mb-3">‚ö†Ô∏è Troubleshooting</h3>
      <ul class="list-disc list-inside text-sm text-slate-300 space-y-2">
        <li>Pastikan notifikasi aplikasi pembayaran aktif di settings HP</li>
        <li>Berikan akses notifikasi ke Geekz Forwarder</li>
        <li>Pastikan koneksi internet aktif</li>
        <li>Webhook URL harus bisa diakses dari publik</li>
        <li>Jika tidak masuk webhook, cek kembali izin notifikasi di settings</li>
      </ul>
    </div>
  </section>
</div>
  
  <!-- Halaman donasi simple -->
<div id="donate-page" class="page-section">
  <section class="mb-12 text-center">
    <h1 class="text-3xl md:text-4xl font-bold mb-4">‚ù§Ô∏è Donasi</h1>
    <p class="text-lg text-slate-300 mb-6">Support pengembangan GeekzPay</p>
  </section>

  <section class="mb-12">
    <div class="max-w-md mx-auto">
      <div class="card rounded-2xl p-8 text-center">
        <h2 class="text-xl font-bold mb-4">Scan QRIS</h2>
        
        <div class="mb-6">
          <img 
            src="https://restapi.amgeekz.my.id/qris.jpg" 
            alt="QRIS Donasi"
            class="w-64 h-64 mx-auto rounded-xl border-2 border-green-500/30"
            onerror="this.src='https://via.placeholder.com/256x256/1e293b/64748b?text=QRIS+Donasi'"
          >
        </div>
        
        <div class="text-sm text-slate-400 space-y-1">
          <p>Support semua e-wallet & bank</p>
          <p>Terima kasih! üöÄ</p>
        </div>
      </div>
    </div>
  </section>
</div>

  <button id="toTop" class="fixed bottom-5 right-5 md:hidden rounded-full bg-indigo-600 text-white px-4 py-2 shadow-lg hidden">‚Üë</button>

<script>
  hljs.highlightAll();

  // Navigation untuk halaman terpisah
  function showPage(pageId) {
    document.querySelectorAll('.page-section').forEach(page => {
      page.classList.remove('active');
    });
    
    document.getElementById(pageId + '-page').classList.add('active');
    
    document.querySelectorAll('.nav-link').forEach(link => {
      link.classList.remove('active');
    });
    document.querySelector(`.nav-link[data-page="${pageId}"]`).classList.add('active');
    
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  document.querySelectorAll('.nav-link').forEach(link => {
    link.addEventListener('click', function() {
      const page = this.getAttribute('data-page');
      showPage(page);
      
      if (window.innerWidth < 768) {
        drawer.classList.add('hidden');
      }
    });
  });

  const drawer = document.getElementById('drawer');
  document.getElementById('openMenu').onclick = () => drawer.classList.remove('hidden');
  document.getElementById('closeMenu').onclick = () => drawer.classList.add('hidden');
  drawer.onclick = (e) => { if (e.target === drawer.firstElementChild) drawer.classList.add('hidden'); };
  drawer.querySelectorAll('[data-close]').forEach(a => a.onclick = () => drawer.classList.add('hidden'));

  const toTop = document.getElementById('toTop');
  window.onscroll = () => { toTop.classList.toggle('hidden', window.scrollY < 400); };
  toTop.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });

  const baseInput = document.getElementById('baseUrl');
  const saveBase  = document.getElementById('saveBase');

  const DEFAULT_BASE = window.location.origin.replace(/\/$/, '');

  function getBase() {
    const stored = (localStorage.getItem('geekzpay_base') || '').trim();
    const current = (baseInput?.value || '').trim();
    return stored || current || DEFAULT_BASE;
  }

  function setBase(v) {
    const val = String(v || '').trim() || DEFAULT_BASE;
    localStorage.setItem('geekzpay_base', val);
    if (baseInput) baseInput.value = val;
  }

  function showJSON(el, text) {
    try { 
      el.textContent = JSON.stringify(JSON.parse(text), null, 2); 
    } catch { 
      el.textContent = text; 
    }
    hljs.highlightElement(el);
  }

  (function initBase() {
    if (baseInput) {
      baseInput.placeholder = DEFAULT_BASE;
      baseInput.value = getBase();
    }
  })();

  if (saveBase) {
    saveBase.onclick = () => {
      setBase(baseInput.value);
      alert('Base URL disimpan!');
    };
  }

  // Fungsi untuk Geekz Forwarder
  function copyWebhookUrl() {
    const urlInput = document.getElementById('webhookUrlInput');
    if (urlInput) {
      navigator.clipboard.writeText(urlInput.value).then(() => {
        alert('URL webhook berhasil disalin!');
      });
    }
  }

  // QRIS Dynamic Test
  const btnDyn = document.getElementById('btnDynamic');
  const btnDynReset = document.getElementById('btnDynamicReset');
  const outDyn = document.getElementById('outDynamic');
  const jsonDyn = document.getElementById('jsonDynamic');
  const metaDyn = document.getElementById('metaDynamic');
  const imgQR = document.getElementById('imgQR');

  if (btnDyn) {
    btnDyn.onclick = async () => {
      const base = document.getElementById('tiBase').value;
      const uniqIn = document.getElementById('tiUnique').value;
      const auto = document.getElementById('tiAutoUnique').checked;
      const amount = document.getElementById('tiAmount').value;
      const payloadStatic = document.getElementById('tiPayload').value;

      const url = getBase().replace(/\/$/, '') + '/qris/dynamic';
      const form = new URLSearchParams();

      if (amount) {
        form.append('amount', amount);
      } else {
        if (!base) { alert('Isi base_amount atau amount'); return; }
        form.append('base_amount', base);
        const uniq = auto ? Math.floor(Math.random()*999)+1 : (uniqIn || '');
        if (!uniq) { alert('unique_code wajib'); return; }
        form.append('unique_code', uniq);
      }
      
      if (payloadStatic) form.append('payload_static', payloadStatic);
      form.append('qr', 'png');

      btnDyn.disabled = true;
      btnDyn.textContent = 'Membuat QR...';
      
      try {
        const start = performance.now();
        const r = await fetch(url, { 
          method:'POST', 
          headers:{ 'Content-Type':'application/x-www-form-urlencoded' }, 
          body:form 
        });
        const text = await r.text();
        const dur = Math.round(performance.now() - start);
        
        metaDyn.textContent = `Status: ${r.status} ‚Ä¢ ${dur} ms ‚Ä¢ ${url}`;
        showJSON(jsonDyn, text);

        try {
          const obj = JSON.parse(text);
          imgQR.src = obj.qr_png_data_url || '';
        } catch { imgQR.src = ''; }

        outDyn.classList.remove('hidden');
        outDyn.scrollIntoView({ behavior: 'smooth' });
      } catch (err) {
        metaDyn.textContent = `Error: ${err.message}`;
        showJSON(jsonDyn, String(err));
        outDyn.classList.remove('hidden');
      } finally {
        btnDyn.disabled = false;
        btnDyn.textContent = 'Buat QRIS';
      }
    };

    btnDynReset.onclick = () => {
      document.getElementById('tiBase').value = '';
      document.getElementById('tiUnique').value = '';
      document.getElementById('tiAutoUnique').checked = false;
      document.getElementById('tiAmount').value = '';
      document.getElementById('tiPayload').value = '';
      outDyn.classList.add('hidden');
    };
  }

  // QR Converter
  const dropZone = document.getElementById('dropZone');
  const fileInput = document.getElementById('fileInput');
  const previewSection = document.getElementById('previewSection');
  const imagePreview = document.getElementById('imagePreview');
  const btnConvert = document.getElementById('btnConvert');
  const btnResetConverter = document.getElementById('btnResetConverter');
  const outConverter = document.getElementById('outConverter');
  const jsonConverter = document.getElementById('jsonConverter');
  const metaConverter = document.getElementById('metaConverter');
  const btnCopyPayload = document.getElementById('btnCopyPayload');

  let currentFile = null;

  if (dropZone) {
    dropZone.addEventListener('click', () => fileInput.click());
    
    dropZone.addEventListener('dragover', (e) => {
      e.preventDefault();
      dropZone.classList.add('dragover');
    });

    dropZone.addEventListener('dragleave', () => {
      dropZone.classList.remove('dragover');
    });

    dropZone.addEventListener('drop', (e) => {
      e.preventDefault();
      dropZone.classList.remove('dragover');
      if (e.dataTransfer.files.length) {
        handleFile(e.dataTransfer.files[0]);
      }
    });

    fileInput.addEventListener('change', (e) => {
      if (e.target.files.length) {
        handleFile(e.target.files[0]);
      }
    });

    function handleFile(file) {
      if (!file.type.startsWith('image/')) {
        alert('Please upload an image file');
        return;
      }

      if (file.size > 2 * 1024 * 1024) {
        alert('File size should be less than 2MB');
        return;
      }

      currentFile = file;
      
      const reader = new FileReader();
      reader.onload = (e) => {
        imagePreview.src = e.target.result;
        previewSection.classList.remove('hidden');
        btnConvert.disabled = false;
      };
      reader.readAsDataURL(file);
    }

    if (btnConvert) {
      btnConvert.onclick = async () => {
        if (!currentFile) {
          metaConverter.textContent = 'Error: Pilih file gambar terlebih dahulu';
          showJSON(jsonConverter, JSON.stringify({ 
            error: 'Tidak ada file yang dipilih',
            instruction: 'Klik area upload dan pilih gambar QR code'
          }, null, 2));
          outConverter.classList.remove('hidden');
          return;
        }

        btnConvert.disabled = true;
        btnConvert.textContent = 'Converting...';

        const formData = new FormData();
        formData.append('image', currentFile);

        try {
          const start = performance.now();
          const url = getBase().replace(/\/$/, '') + '/qris/decode';
          
          const response = await fetch(url, {
            method: 'POST',
            body: formData,
            signal: AbortSignal.timeout(30000)
          });
          
          if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
          }
          
          const responseText = await response.text();
          const dur = Math.round(performance.now() - start);

          let result;
          try {
            result = JSON.parse(responseText);
          } catch (parseError) {
            metaConverter.textContent = `Status: ${response.status} ‚Ä¢ Response tidak valid`;
            showJSON(jsonConverter, JSON.stringify({ 
              error: 'Response server tidak valid',
              response: responseText.substring(0, 200),
              url: url
            }, null, 2));
            outConverter.classList.remove('hidden');
            return;
          }

          metaConverter.textContent = `Status: ${response.status} ‚Ä¢ ${dur} ms`;
          
          if (result.ok && result.payload) {
            showJSON(jsonConverter, JSON.stringify({ 
              success: true,
              payload: result.payload,
              file_info: result.file_info,
              decoded_at: result.decoded_at,
              note: result.note || ''
            }, null, 2));
            
            navigator.clipboard.writeText(result.payload).then(() => {
              console.log('Payload copied to clipboard');
            });
          } else {
            showJSON(jsonConverter, JSON.stringify({ 
              error: result.error || 'Gagal decode QR code',
              response: result
            }, null, 2));
          }
          
          outConverter.classList.remove('hidden');
          outConverter.scrollIntoView({ behavior: 'smooth' });
          
        } catch (err) {
          metaConverter.textContent = `Error: ${err.message}`;
          
          let errorNote = '';
          if (err.name === 'TimeoutError') {
            errorNote = 'Request timeout. Server mungkin sedang sibuk.';
          } else if (err.message.includes('CORS')) {
            errorNote = 'CORS error. Periksa konfigurasi server.';
          } else if (err.message.includes('Failed to fetch')) {
            errorNote = 'Tidak dapat terhubung ke server. Periksa koneksi internet.';
          } else {
            errorNote = 'Pastikan endpoint /qris/decode tersedia di server.';
          }
          
          showJSON(jsonConverter, JSON.stringify({ 
            error: err.message,
            note: errorNote
          }, null, 2));
          outConverter.classList.remove('hidden');
        } finally {
          btnConvert.disabled = false;
          btnConvert.textContent = 'Convert ke Payload';
        }
      };
    }

    if (btnCopyPayload) {
      btnCopyPayload.onclick = () => {
        const payloadText = jsonConverter.textContent;
        navigator.clipboard.writeText(payloadText).then(() => {
          alert('Payload berhasil disalin!');
        });
      };
    }

    if (btnResetConverter) {
      btnResetConverter.onclick = () => {
        fileInput.value = '';
        previewSection.classList.add('hidden');
        outConverter.classList.add('hidden');
        btnConvert.disabled = true;
        currentFile = null;
      };
    }
  }

  // Webhook Test
  const btnWh = document.getElementById('btnWebhook');
  const btnWhReset = document.getElementById('btnWebhookReset');
  const outWh = document.getElementById('outWebhook');
  const jsonWh = document.getElementById('jsonWebhook');
  const metaWh = document.getElementById('metaWebhook');

  if (btnWh) {
    btnWh.onclick = async () => {
      const token = document.getElementById('tiToken').value;
      const mode = document.getElementById('tiMode').value;
      const body = document.getElementById('tiBody').value;
      
      if (!token) { 
        alert('Isi token terlebih dahulu'); 
        return; 
      }
      
      const url = `${getBase().replace(/\/$/, '')}/webhook/payment?token=${encodeURIComponent(token)}`;
      let headers = {};
      let payload;

      if (mode === 'json') {
        headers['Content-Type'] = 'application/json';
        try { 
          JSON.parse(body); 
        } catch { 
          alert('Format JSON tidak valid'); 
          return; 
        }
        payload = body;
      } else if (mode === 'form') {
        headers['Content-Type'] = 'application/x-www-form-urlencoded';
        try {
          const bodyObj = JSON.parse(body);
          const params = new URLSearchParams();
          for (const [key, value] of Object.entries(bodyObj)) {
            params.append(key, value);
          }
          payload = params;
        } catch {
          payload = new URLSearchParams();
          payload.append('message', body);
        }
      } else {
        headers['Content-Type'] = 'text/plain';
        payload = body;
      }

      btnWh.disabled = true;
      btnWh.textContent = 'Mengirim...';
      
      try {
        const start = performance.now();
        const response = await fetch(url, { 
          method: 'POST', 
          headers, 
          body: payload 
        });
        
        const responseText = await response.text();
        const dur = Math.round(performance.now() - start);
        
        metaWh.textContent = `Status: ${response.status} ‚Ä¢ ${dur} ms`;
        showJSON(jsonWh, responseText);
        outWh.classList.remove('hidden');
        outWh.scrollIntoView({ behavior: 'smooth' });
        
      } catch (err) {
        metaWh.textContent = `Error: ${err.message}`;
        showJSON(jsonWh, JSON.stringify({ 
          error: err.message,
          note: 'Periksa koneksi internet dan Base URL'
        }, null, 2));
        outWh.classList.remove('hidden');
      } finally {
        btnWh.disabled = false;
        btnWh.textContent = 'Test Webhook';
      }
    };

    if (btnWhReset) {
      btnWhReset.onclick = () => {
        document.getElementById('tiToken').value = '';
        document.getElementById('tiMode').value = 'json';
        document.getElementById('tiBody').value = '{ "message": "Pembayaran masuk Rp 10.338 dari ShopeePay" }';
        outWh.classList.add('hidden');
      };
    }
  }
</script>
</body>
</html>
